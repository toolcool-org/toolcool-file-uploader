{
  "version": 3,
  "sources": ["../src/core/ui/uploader.ts", "../src/core/index.ts"],
  "sourcesContent": ["export interface IUploader {\n  destroy: () => void;\n}\n\nconst DRAG_CLASS = 'is-dragover';\n\nconst Uploader = ($uploader: HTMLElement) : IUploader => {\n  const $uploadPanel = $uploader.querySelector('[data-tc=\"upload-panel\"]');\n  const $fileInput = $uploadPanel?.querySelector('input[type=\"file\"]');\n\n  // const $previewPanel = $uploader.querySelector('[data-tc=\"preview-panel\"]');\n\n  const prevent = (evt: MouseEvent) => {\n    evt.preventDefault();\n    evt.stopPropagation();\n  };\n\n  const removeDragClass = (evt: DragEvent) => {\n    evt.preventDefault();\n    evt.stopPropagation();\n    $uploadPanel?.classList.remove(DRAG_CLASS);\n  };\n\n  const addDragClass = (evt: DragEvent) => {\n    evt.preventDefault();\n    evt.stopPropagation();\n    $uploadPanel?.classList.add(DRAG_CLASS);\n  };\n\n  const handleDrop = async (evt: DragEvent) => {\n    removeDragClass(evt);\n\n    if(!evt || !evt.dataTransfer || !evt.dataTransfer.files || evt.dataTransfer.files.length < 0) return;\n\n    const file: File = evt.dataTransfer.files[0];\n    await upload(file);\n  };\n\n  const upload = async (file: File) => {\n    console.log('file', file);\n    /*\n    if (!file.type.match('image.*')) {\n      // https://fkhadra.github.io/react-toastify/introduction/\n      toast('\u26A0\uFE0F Only image files are supported.');\n      return;\n    }\n\n    const img = await loadImage(file);\n    */\n  };\n\n  const onFileInputChange = async (evt: MouseEvent) => {\n    const $target = evt.target as HTMLInputElement;\n    if(!$target.files || $target.files.length <= 0) return;\n\n    const file: File = $target.files[0];\n    await upload(file);\n  };\n\n  (() => {\n    $fileInput?.addEventListener('change', onFileInputChange);\n    $uploadPanel?.addEventListener('drag', prevent);\n    $uploadPanel?.addEventListener('dragstart', prevent);\n    $uploadPanel?.addEventListener('dragend', removeDragClass);\n    $uploadPanel?.addEventListener('dragleave', removeDragClass);\n    $uploadPanel?.addEventListener('dragover', addDragClass);\n    $uploadPanel?.addEventListener('dragenter', addDragClass);\n    $uploadPanel?.addEventListener('drop', handleDrop);\n  })();\n\n  const destroy = () => {\n    $fileInput?.removeEventListener('change', onFileInputChange);\n    $uploadPanel?.removeEventListener('drag', prevent);\n    $uploadPanel?.removeEventListener('dragstart', prevent);\n    $uploadPanel?.removeEventListener('dragend', removeDragClass);\n    $uploadPanel?.removeEventListener('dragleave', removeDragClass);\n    $uploadPanel?.removeEventListener('dragover', addDragClass);\n    $uploadPanel?.removeEventListener('dragenter', addDragClass);\n    $uploadPanel?.removeEventListener('drop', handleDrop);\n  };\n\n  return {\n    destroy,\n  };\n};\n\nexport default Uploader;", "import './css/styles.css';\nimport Uploader from './ui/uploader';\n\n/**\n * Init all file uploader sections on the page.\n * Each section is defined by the following data attribute:\n * data-tc=\"file-uploader\"\n */\nconst init = () => {\n  const $uploaders = document.querySelectorAll('[data-tc=\"file-uploader\"]');\n  for(const $uploader of $uploaders){\n    const api = Uploader($uploader as HTMLElement);\n    $uploader.tc = $uploader.tc || {\n      fileUploader: api,\n    };\n  }\n};\n\nconst ToolCoolFileUploader = () => {\n  init();\n};\n\nexport default ToolCoolFileUploader;\n\nwindow.tcFileUploader = ToolCoolFileUploader;"],
  "mappings": ";;;;;;;mNAIA,IAAMA,EAAa,cAEbC,EAAYC,GAAuC,CACvD,IAAMC,EAAeD,EAAU,cAAc,0BAA0B,EACjEE,EAAaD,GAAA,YAAAA,EAAc,cAAc,sBAIzCE,EAAWC,GAAoB,CACnCA,EAAI,eAAe,EACnBA,EAAI,gBAAgB,CACtB,EAEMC,EAAmBD,GAAmB,CAC1CA,EAAI,eAAe,EACnBA,EAAI,gBAAgB,EACpBH,GAAA,MAAAA,EAAc,UAAU,OAAOH,EACjC,EAEMQ,EAAgBF,GAAmB,CACvCA,EAAI,eAAe,EACnBA,EAAI,gBAAgB,EACpBH,GAAA,MAAAA,EAAc,UAAU,IAAIH,EAC9B,EAEMS,EAAoBH,GAAmBI,EAAA,wBAG3C,GAFAH,EAAgBD,CAAG,EAEhB,CAACA,GAAO,CAACA,EAAI,cAAgB,CAACA,EAAI,aAAa,OAASA,EAAI,aAAa,MAAM,OAAS,EAAG,OAE9F,IAAMK,EAAaL,EAAI,aAAa,MAAM,GAC1C,MAAMM,EAAOD,CAAI,CACnB,GAEMC,EAAgBD,GAAeD,EAAA,wBACnC,QAAQ,IAAI,OAAQC,CAAI,CAU1B,GAEME,EAA2BP,GAAoBI,EAAA,wBACnD,IAAMI,EAAUR,EAAI,OACpB,GAAG,CAACQ,EAAQ,OAASA,EAAQ,MAAM,QAAU,EAAG,OAEhD,IAAMH,EAAaG,EAAQ,MAAM,GACjC,MAAMF,EAAOD,CAAI,CACnB,GAEA,OACEP,GAAA,MAAAA,EAAY,iBAAiB,SAAUS,GACvCV,GAAA,MAAAA,EAAc,iBAAiB,OAAQE,GACvCF,GAAA,MAAAA,EAAc,iBAAiB,YAAaE,GAC5CF,GAAA,MAAAA,EAAc,iBAAiB,UAAWI,GAC1CJ,GAAA,MAAAA,EAAc,iBAAiB,YAAaI,GAC5CJ,GAAA,MAAAA,EAAc,iBAAiB,WAAYK,GAC3CL,GAAA,MAAAA,EAAc,iBAAiB,YAAaK,GAC5CL,GAAA,MAAAA,EAAc,iBAAiB,OAAQM,GAclC,CACL,QAZc,IAAM,CACpBL,GAAA,MAAAA,EAAY,oBAAoB,SAAUS,GAC1CV,GAAA,MAAAA,EAAc,oBAAoB,OAAQE,GAC1CF,GAAA,MAAAA,EAAc,oBAAoB,YAAaE,GAC/CF,GAAA,MAAAA,EAAc,oBAAoB,UAAWI,GAC7CJ,GAAA,MAAAA,EAAc,oBAAoB,YAAaI,GAC/CJ,GAAA,MAAAA,EAAc,oBAAoB,WAAYK,GAC9CL,GAAA,MAAAA,EAAc,oBAAoB,YAAaK,GAC/CL,GAAA,MAAAA,EAAc,oBAAoB,OAAQM,EAC5C,CAIA,CACF,EAEOM,EAAQd,EC9Ef,IAAMe,EAAO,IAAM,CACjB,IAAMC,EAAa,SAAS,iBAAiB,2BAA2B,EACxE,QAAUC,KAAaD,EAAW,CAChC,IAAME,EAAMC,EAASF,CAAwB,EAC7CA,EAAU,GAAKA,EAAU,IAAM,CAC7B,aAAcC,CAChB,CACF,CACF,EAEME,EAAuB,IAAM,CACjCL,EAAK,CACP,EAEOM,EAAQD,EAEf,OAAO,eAAiBA",
  "names": ["DRAG_CLASS", "Uploader", "$uploader", "$uploadPanel", "$fileInput", "prevent", "evt", "removeDragClass", "addDragClass", "handleDrop", "__async", "file", "upload", "onFileInputChange", "$target", "uploader_default", "init", "$uploaders", "$uploader", "api", "uploader_default", "ToolCoolFileUploader", "core_default"]
}
