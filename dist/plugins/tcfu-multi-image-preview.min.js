/* 
Tool Cool File Uploader - Multi Image Preview Plugin
Version: 0.0.1
Documentation: https://github.com/toolcool-org/toolcool-file-uploader
License:    
Author: Tool Cool, toolcool.org@gmail.com>                          
*/
(()=>{var h=(l,r,n)=>new Promise((e,i)=>{var a=d=>{try{s(n.next(d))}catch(t){i(t)}},u=d=>{try{s(n.throw(d))}catch(t){i(t)}},s=d=>d.done?e(d.value):Promise.resolve(d.value).then(a,u);s((n=n.apply(l,r)).next())});var v=l=>!isNaN(parseFloat(l))&&isFinite(l);var I=l=>new Promise((r,n)=>{let e=new Image;e.crossOrigin="Anonymous",e.onerror=a=>n(a),e.onload=a=>{let{width:u,height:s}=a.target;r({$image:e,width:u,height:s})};let i=new FileReader;i.onerror=a=>n(a),i.onload=()=>{e.src=i.result},i.readAsDataURL(l)}),w=l=>{let r,n=[],e,i,a,u=()=>{var t;if(!!r){(t=r.$uploadPanel)==null||t.classList.remove("hidden"),e==null||e.classList.add("hidden");for(let m of n)m.remove();n=[],r.$fileInput&&(r.$fileInput.value="")}},s=()=>{!r||l.uploadCallback&&typeof l.uploadCallback=="function"&&l.uploadCallback({files:r.files})},d=t=>{let o=t.currentTarget.parentElement;if(!o)return;let c=n.findIndex(f=>f===o);c!==-1&&(n.splice(c,1),o.remove(),n.length<=0&&u())};return{id:"MultiImagePreviewPlugin",title:"Multi Image Preview Plugin",extensions:["jpg","jpeg","png","apng","gif","avif","svg","webp"],mimeTypes:["image/jpeg","image/png","image/apng","image/avif","image/svg+xml","image/webp"],validate:(t,m)=>h(void 0,null,function*(){let o=null;try{o=yield I(m)}catch(c){}return o?v(t.maxWidth)&&o.width>t.maxWidth?{isValid:!1,message:`The image width should not be more than ${t.maxWidth} pixels.`}:v(t.maxHeight)&&o.height>t.maxHeight?{isValid:!1,message:`The image height should not be more than ${t.maxHeight} pixels.`}:{isValid:!0,message:""}:{isValid:!1,message:"Invalid image."}}),upload:t=>h(void 0,null,function*(){var o;if(r=t,e=r.$uploader.querySelector('[data-tc="preview-panel"]'),!e)return;(o=r.$uploadPanel)==null||o.classList.add("hidden"),e==null||e.classList.remove("hidden"),i=e.querySelector('[data-tc="cancel-preview-btn"]'),i==null||i.addEventListener("click",u),a=e.querySelector('[data-tc="upload-btn"]'),a==null||a.addEventListener("click",s);let m=e.querySelector('[data-tc="preview"]');for(let c of r.files){let f=null;try{f=yield I(c)}catch(L){console.error("Image is not valid:",L)}if(!f)continue;let p=document.createElement("figure"),g=document.createElement("button");g.type="button",g.classList.add("tcfu-remove-btn"),g.innerHTML=`
<svg 
  xmlns="http://www.w3.org/2000/svg" 
  width="20"
  height="20"
  fill="none" 
  stroke="currentColor" 
  stroke-linecap="round" 
  stroke-linejoin="round" 
  stroke-width="1.5" 
  viewBox="0 0 24 24">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M18 6 6 18M6 6l12 12"/>
</svg>`,p.append(g),g.addEventListener("click",d),p.append(f.$image),n.push(p),m==null||m.append(p)}l.previewCallback&&typeof l.previewCallback=="function"&&l.previewCallback({files:t.files})}),destroy:()=>{for(let t of n)t.remove();n=[],i==null||i.removeEventListener("click",u),a==null||a.removeEventListener("click",s),r=void 0,e=void 0,i=void 0,a=void 0}}};window.tcfuMultiImagePreviewPlugin=w;var k=w;})();
//# sourceMappingURL=tcfu-multi-image-preview.min.js.map
