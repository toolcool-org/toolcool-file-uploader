/* 
Tool Cool File Uploader
Version: 0.0.1
Documentation: https://github.com/toolcool-org/toolcool-file-uploader
License:    
Author: Tool Cool, toolcool.org@gmail.com>                          
*/
(()=>{var f=(s,r,t)=>new Promise((e,d)=>{var n=g=>{try{a(t.next(g))}catch(c){d(c)}},o=g=>{try{a(t.throw(g))}catch(c){d(c)}},a=g=>g.done?e(g.value):Promise.resolve(g.value).then(n,o);a((t=t.apply(s,r)).next())});var h=s=>{let r=[];return{init:()=>{if(!!s.plugins)for(let n of s.plugins){let o=n();r.push(o),o.init&&typeof o.init=="function"&&o.init()}},upload:n=>{for(let o of r)o.upload&&typeof o.upload=="function"&&o.upload(n)},destroy:()=>{for(let n of r)n.destroy&&typeof n.destroy=="function"&&n.destroy()}}},l=h;var v="is-dragover",S=(s,r)=>{let t=null,e=s.querySelector('[data-tc="upload-panel"]'),d=e==null?void 0:e.querySelector('input[type="file"]'),n=i=>{i.preventDefault(),i.stopPropagation()},o=i=>{i.preventDefault(),i.stopPropagation(),e==null||e.classList.remove(v)},a=i=>{i.preventDefault(),i.stopPropagation(),e==null||e.classList.add(v)},g=i=>f(void 0,null,function*(){if(o(i),!i||!i.dataTransfer||!i.dataTransfer.files||i.dataTransfer.files.length<0)return;let m=i.dataTransfer.files[0];yield c(m)}),c=i=>f(void 0,null,function*(){t==null||t.upload({file:i,$uploader:s,$uploadPanel:e})}),p=i=>f(void 0,null,function*(){let m=i.target;if(!m.files||m.files.length<=0)return;let E=m.files[0];yield c(E)});return t=l(r),t.init(),d==null||d.addEventListener("change",p),e==null||e.addEventListener("drag",n),e==null||e.addEventListener("dragstart",n),e==null||e.addEventListener("dragend",o),e==null||e.addEventListener("dragleave",o),e==null||e.addEventListener("dragover",a),e==null||e.addEventListener("dragenter",a),e==null||e.addEventListener("drop",g),{destroy:()=>{d==null||d.removeEventListener("change",p),e==null||e.removeEventListener("drag",n),e==null||e.removeEventListener("dragstart",n),e==null||e.removeEventListener("dragend",o),e==null||e.removeEventListener("dragleave",o),e==null||e.removeEventListener("dragover",a),e==null||e.removeEventListener("dragenter",a),e==null||e.removeEventListener("drop",g),t==null||t.destroy()}}},u=S;var U=s=>new Promise((r,t)=>{let e=new Image;e.crossOrigin="Anonymous",e.onerror=n=>t(n),e.onload=n=>{let{width:o,height:a}=n.target;r({$image:e,width:o,height:a})};let d=new FileReader;d.onerror=n=>t(n),d.onload=()=>{e.src=d.result},d.readAsDataURL(s)}),D=()=>{let s;return{extensions:["jpg","jpeg","png","gif"],upload:r=>f(void 0,null,function*(){var e;let t=r.$uploader.querySelector('[data-tc="preview-panel"]');!t||((e=r.$uploadPanel)==null||e.classList.add("hidden"),t.classList.remove("hidden"),s=yield U(r.file),t.append(s.$image))}),destroy:()=>{var r;try{(r=s==null?void 0:s.$image)==null||r.remove()}catch(t){}s=void 0}}},I=D;var L={path:"",plugins:[I]};var y=s=>{let r,t,e=n=>{let o=Object.assign(L,n);if(t=document.querySelector(o.path),!t){console.error("File uploader error: the path property is not defined.");return}r=u(t,o)},d=()=>{r==null||r.destroy(),r=void 0,t=void 0};return e(s),{destroy:d}},K=y;window.tcFileUploader=y;})();
//# sourceMappingURL=toolcool-file-uploader.min.js.map
