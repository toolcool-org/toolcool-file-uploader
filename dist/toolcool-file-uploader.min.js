/* 
Tool Cool File Uploader
Version: 0.0.1
Documentation: https://github.com/toolcool-org/toolcool-file-uploader
License:    
Author: Tool Cool, toolcool.org@gmail.com>                          
*/
(()=>{var f=(s,r,t)=>new Promise((e,d)=>{var i=a=>{try{g(t.next(a))}catch(c){d(c)}},n=a=>{try{g(t.throw(a))}catch(c){d(c)}},g=a=>a.done?e(a.value):Promise.resolve(a.value).then(i,n);g((t=t.apply(s,r)).next())});var w=s=>{let r=[];return{init:()=>{if(!!s.plugins)for(let i of s.plugins){let n=i();r.push(n),n.init&&typeof n.init=="function"&&n.init()}},upload:i=>{for(let n of r)n.upload&&typeof n.upload=="function"&&n.upload(i)},destroy:()=>{for(let i of r)i.destroy&&typeof i.destroy=="function"&&i.destroy()}}},v=w;var I="is-dragover",S=(s,r)=>{let t=null,e=s.querySelector('[data-tc="upload-panel"]'),d=e==null?void 0:e.querySelector('input[type="file"]'),i=s.querySelector('[data-tc="preview-panel"]'),n=o=>{o.preventDefault(),o.stopPropagation()},g=o=>{o.preventDefault(),o.stopPropagation(),e==null||e.classList.remove(I)},a=o=>{o.preventDefault(),o.stopPropagation(),e==null||e.classList.add(I)},c=o=>f(void 0,null,function*(){if(g(o),!o||!o.dataTransfer||!o.dataTransfer.files||o.dataTransfer.files.length<0)return;let m=o.dataTransfer.files[0];yield p(m)}),p=o=>f(void 0,null,function*(){t==null||t.upload({file:o,$uploadPanel:e,$previewPanel:i})}),l=o=>f(void 0,null,function*(){let m=o.target;if(!m.files||m.files.length<=0)return;let h=m.files[0];yield p(h)});return t=v(r),t.init(),d==null||d.addEventListener("change",l),e==null||e.addEventListener("drag",n),e==null||e.addEventListener("dragstart",n),e==null||e.addEventListener("dragend",g),e==null||e.addEventListener("dragleave",g),e==null||e.addEventListener("dragover",a),e==null||e.addEventListener("dragenter",a),e==null||e.addEventListener("drop",c),{destroy:()=>{d==null||d.removeEventListener("change",l),e==null||e.removeEventListener("drag",n),e==null||e.removeEventListener("dragstart",n),e==null||e.removeEventListener("dragend",g),e==null||e.removeEventListener("dragleave",g),e==null||e.removeEventListener("dragover",a),e==null||e.removeEventListener("dragenter",a),e==null||e.removeEventListener("drop",c),t==null||t.destroy()}}},u=S;var U=s=>new Promise((r,t)=>{let e=new Image;e.crossOrigin="Anonymous",e.onerror=i=>t(i),e.onload=i=>{let{width:n,height:g}=i.target;r({$image:e,width:n,height:g})};let d=new FileReader;d.onerror=i=>t(i),d.onload=()=>{e.src=d.result},d.readAsDataURL(s)}),T=()=>{let s;return{extensions:["jpg","jpeg","png","gif"],init:()=>{},upload:r=>f(void 0,null,function*(){var t;!r.$previewPanel||((t=r.$uploadPanel)==null||t.classList.add("hidden"),r.$previewPanel.classList.remove("hidden"),s=yield U(r.file),r.$previewPanel.append(s.$image))}),destroy:()=>{var r;try{(r=s==null?void 0:s.$image)==null||r.remove()}catch(t){}s=void 0}}},L=T;var y={path:"",plugins:[L]};var E=s=>{let r,t,e=i=>{let n=Object.assign(y,i);if(t=document.querySelector(n.path),!t){console.error("File uploader error: the path property is not defined.");return}r=u(t,n)},d=()=>{r==null||r.destroy(),r=void 0,t=void 0};return e(s),{destroy:d}},B=E;window.tcFileUploader=E;})();
//# sourceMappingURL=toolcool-file-uploader.min.js.map
